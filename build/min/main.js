angular.module("sampleApp",["ngRoute","appRoutes","MainCtrl","RoomCtrl","EntryCtrl","GeekService","RoomService","DynamicSizing","UserService","SocketService","ngAudio","NotifyAnim","Filters","Anim"]),angular.module("appRoutes",[]).config(["$routeProvider","$locationProvider",function(o,n){o.when("/",{templateUrl:"views/entry.html",controller:"EntryController"}).when("/:name",{templateUrl:"views/room.html",controller:"RoomController"}),n.html5Mode(!0)}]),angular.module("Anim",[]).factory("playAnim",function(){console.log("loading animations");var o=!1,n=function(){t("#a",250,!0),t("#b",293,!0),t("#c",271,!0),t("#d",222,!0)},e=function(){o=!o},t=function(n,e,r){r?$(n).animate({height:"20%"},e,function(){r=!r,t(n,e-20,r)}):o?$(n).animate({height:"100%"},e,function(){r=!r,t(n,e+20,r)}):$(n).animate({height:"0px"},e)};return{run:n,change:e}}).factory("notifyAnim",function(){var o=function(){$(".bottomright").animate({bottom:"15px",opacity:1},400)},n=function(){$(".bottomright").animate({bottom:"0px",opacity:0},400)},e=function(o){$(".table").scroll(function(){$(".table").scrollTop()+$(".table").height()==$(".songs").height()&&o()})};return{run:o,out:n,init:e}}),angular.module("DynamicSizing",[]).directive("resize",function(o){return{link:function(n,e,t){n.onResizeFunction=function(n){var e=$(".table").scrollTop(),t=o.innerHeight;$(".table").css({height:t-e-n.resize+"px"})},n.onResizeFunction(t),angular.element(o).bind("resize",function(){n.onResizeFunction(t),n.$apply()})}}}),angular.module("NotifyAnim",[]).factory("notify",function(){return{run:function(){$(".bottomright").animate({top:"13px"},300,function(){$(this).delay(3e3).animate({top:"-75px"},300)})}}}),angular.module("GeekService",[]).factory("Geek",["$http",function(o){return{get:function(){return o.get("/api/geeks")},getID:function(n){return o.get("/api/geeks/"+n)},create:function(n){return o.post("/api/geeks",n)},"delete":function(n){return o.delete("/api/geeks/"+n)}}}]),angular.module("NerdService",[]).factory("Nerd",["$http",function(o){return{get:function(){return o.get("/api/nerds")},create:function(n){return o.post("/api/nerds",n)},"delete":function(n){return o.delete("/api/nerds/"+n)}}}]),angular.module("RoomService",[]).factory("Room",["$http",function(o){return{get:function(n,e){return o.get("/api/room/"+n).success(e).error(e)},create:function(n){return o.post("/api/room",n)},"delete":function(n){return o.delete("/api/room/"+n)}}}]),angular.module("SocketService",[]).factory("socket",function(o){var n=io.connect(window.location.hostname);return{on:function(e,t){n.on(e,function(){var e=arguments;o.$apply(function(){t.apply(n,e)})})},emit:function(e,t,r){n.emit(e,t,function(){var e=arguments;o.$apply(function(){r&&r.apply(n,e)})})}}}),angular.module("UserService",[]).service("User",function(){return{Person:{Name:""},Room:{}}}),angular.module("EntryCtrl",[]).controller("EntryController",function(o,n,e,t){o.query="",o.results={},o.loadRooms=function(){n.get("/api/all").success(function(n){console.log(n),o.results=n}).error(function(o){console.log(o)})},o.loadRooms(),o.enterRoom=function(o){e.path("/"+o)},o.createRoom=function(e){e?n.post("api/room/"+e,{}).success(function(n){console.log(n),o.enterRoom(e)}).error(function(o){console.log(o)}):alert("Please Enter a Room Name")},t.on("totalChange",function(){o.loadRooms()}),t.on("new",function(n){o.userCount=n}),o.search=function(n){return n.name.toLowerCase().indexOf(o.query.toLowerCase())>-1}}),angular.module("MainCtrl",[]).controller("MainController",function(o,n){o.formData={},n.get("/api/todos").success(function(n){o.todos=n,console.log(n)}).error(function(o){console.log("Error: "+o)}),o.createTodo=function(){n.post("/api/todos",o.formData).success(function(n){o.formData={},o.todos=n,console.log(n)}).error(function(o){console.log("Error: "+o)})},o.deleteTodo=function(e){n.delete("/api/todos/"+e).success(function(n){o.todos=n,console.log(n)}).error(function(o){console.log("Error: "+o)})}}),angular.module("RoomCtrl",[]).controller("RoomController",function(o,n,e,t,r,i,c,a,u,l){function s(o,n){var e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src=o,t.onreadystatechange=n,t.onload=n,e.appendChild(t)}n.roomName=o.path().split("/")[1],n.songInfo=null,n.playing=!1,n.load=function(o){try{n.sound=a.load(o.stream_url+"?client_id=YOUR_CLIENT_ID"),n.songInfo=o,i.emit("lock",o)}catch(e){console.log(e),alert("didn't load")}},i.on("play",function(o){var e=(new Date).getMilliseconds(),t=e-o;setTimeout(function(){n.sound.play()},2e3-t)}),i.on("load",function(o){i.emit("start",o)}),n.loadIt=function(o,e){n.sound=a.load(n.currentRoom.users[o].songURL+"?client_id=YOUR_CLIENT_ID"),n.sound.start=e};n.start=function(){n.playing=!n.playing,n.playing?n.sound.play():n.sound.pause(),u.change(),u.run(),i.emit("start",n.currentRoom.roomName)},n.$watch(function(){n.playing&&1==n.sound.progress&&(n.playing=!n.playing,u.change(),u.run())}),i.on("joined",function(){e.get("/api/room/"+o.path().split("/")[1]).success(function(o){n.currentRoom=o,console.log(o)}).error(function(o){console.log(o)}),i.emit("enter",{})}),i.on("roomChange",function(t){console.log("caught Change "+t),n.message=t,l.run(),setTimeout(function(){l.out()},2e3),e.get("/api/room/"+o.path().split("/")[1]).success(function(o){n.currentRoom=o,console.log(o)}).error(function(o){console.log(o)})}),i.on("left",function(t){n.message=t.userName+" left",l.run(),setTimeout(function(){l.out()},2e3),e.get("/api/room/"+o.path().split("/")[1]).success(function(o){n.currentRoom=o,console.log(o)}).error(function(o){console.log(o)})}),n.search=function(){i.emit("searching",{}),n.player.get("/tracks",{q:n.searchQuery,limit:20},function(o){n.$apply(function(){n.searchResults=o,console.log(o)})})},i.on("change",function(){e.get("/api/room/"+o.path().split("/")[1]).success(function(o){n.currentRoom=o,console.log(o)}).error(function(o){console.log(o)})}),n.emit=function(o){n.sound=a.load(o),n.sound.play()};var m=function(){SC.initialize({client_id:"YOUR_CLIENT_ID"}),n.player=SC};s("http://connect.soundcloud.com/sdk.js",m),n.userName=prompt("Enter Your Name"),i.emit("joinGroup",{roomName:n.roomName,userName:n.userName})}),angular.module("Filters",[]).filter("array",function(){return function(o){var n=[];return angular.forEach(o,function(o){n.push(o)}),n}});